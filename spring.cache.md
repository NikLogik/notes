---
id: ph86qu8jsm9zw2f7ugy4mot
title: Cache
desc: ''
updated: 1668271961144
created: 1668259030797
---

## Введение   

Абстракция кэширования, аналогично ``@Transactional``, позволяет согласованно использовать различные подходы с минимальным воздействием на код приложения.   

Сервис кэширования, являясь абстракцией, освобождает разработчика от напиания бизнес-логики работы с кэшем, но при этом требует реализацию конкретного хранилища для кешируемых данных.

Чтобы использовать предоставляемую абстракцию кеширования, разработчику необходимо позаботиться о двух вещах:   
* задекларировать методы и стратегию кеширования
* реализацию хранилища данных кеша

Две реализации предоставляются 'out of the box':
* JDK ConcurrentMap
* EhCache

___

## Декларирование стратегий кеширования

При объявлении стратегий кеширования, возможно использовать одну из следующих аннотаций:   
* ``@Cacheable`` - декларирует методы, возвращаемое значение которых добавляется в кеш.
* ``@CachePut`` - используется для обновления значений кеша. Всегда вызывается реальный метод и результат помещяется в кеш-хранилище
* ``@CacheEvict`` - используется для извлечения значений из хранилища.
* ``@Caching`` - используется, когда необходимо применить несколько вышеперечисленных аннотаций

Все методы, помечаемые данными аннотациями, должны быть объявлены как ___public___

___

## Генерация ключей кеша

Так как кеш-хранилище по существу является ассоциированным массивом (ключ-значение), то генерация ключей для него по-умолчанию, основываясь на структуре метода, осущетсвляется следующим образом:
* если нет параметров, возвращает 0
* если один параметр, возвращает экземпляр этого параметра
* если несколько параметров, возвращает хэш-код расчитанный на основе этих параметров
